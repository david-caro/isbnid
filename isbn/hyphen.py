
#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
# Hypatia: Module ISBN Range [hyphen]
#

__author__ = "Neko"
__license__ = 'LGPL http://www.gnu.org/licenses/lgpl.txt'
__version__ = '0.3.0'

try:
    from xml.etree.cElementTree import ElementTree
except ImportError:
    from xml.etree.ElementTree import ElementTree
    
import pkg_resources, sys


# Interpretes current ISBN agency ranges
# Data obtained from https://www.isbn-international.org/
# https://www.isbn-international.org/export_rangemessage.xml

class ISBNRangeError(Exception):
    def __init__(self, value):
        self.value = value
    def __str__(self):
        return repr(self.value)

# ISBN Structure
#
# Prefix Element: 978, 979
# Registration Group Element
# Registrant Element
# Publication Element
# Check Digit

class ISBNRange(object):      

    _range_grp = {
        "9780000000000": 1,
        "9786000000000": 3,
        "9786500000000": 0,
        "9787000000000": 1,
        "9788000000000": 2,
        "9789500000000": 3,
        "9789900000000": 4,
        "9789990000000": 5,
        "9790000000000": 0,
        "9791000000000": 2,
        "9791300000000": 0,
    }

    _range_reg = {
        "9780000000000": 2,
        "9780200000000": 3,
        "9780700000000": 4,
        "9780850000000": 5,
        "9780900000000": 6,
        "9780950000000": 7,
        "9781000000000": 2,
        "9781100000000": 3,
        "9781330000000": 3,
        "9781400000000": 4,
        "9781550000000": 5,
        "9781869800000": 6,
        "9781999000000": 7,
        "9782000000000": 2,
        "9782200000000": 3,
        "9782350000000": 5,
        "9782400000000": 3,
        "9782700000000": 4,
        "9782840000000": 5,
        "9782900000000": 6,
        "9782950000000": 7,
        "9783000000000": 2,
        "9783030000000": 3,
        "9783034000000": 4,
        "9783037000000": 5,
        "9783040000000": 2,
        "9783200000000": 3,
        "9783700000000": 4,
        "9783850000000": 5,
        "9783900000000": 6,
        "9783950000000": 7,
        "9783954000000": 5,
        "9783970000000": 7,
        "9783990000000": 5,
        "9783995000000": 5,
        "9784000000000": 2,
        "9784200000000": 3,
        "9784700000000": 4,
        "9784850000000": 5,
        "9784900000000": 6,
        "9784950000000": 7,
        "9785000000000": 5,
        "9785005000000": 4,
        "9785010000000": 2,
        "9785200000000": 3,
        "9785421000000": 4,
        "9785430000000": 3,
        "9785431000000": 4,
        "9785440000000": 3,
        "9785441000000": 4,
        "9785450000000": 3,
        "9785700000000": 4,
        "9785850000000": 5,
        "9785900000000": 6,
        "9785910000000": 5,
        "9785920000000": 4,
        "9785930000000": 5,
        "9785950000000": 7,
        "9785950100000": 4,
        "9785980000000": 5,
        "9785990000000": 7,
        "9785991000000": 4,
        "9786000000000": 2,
        "9786001000000": 3,
        "9786005000000": 4,
        "9786009000000": 5,
        "9786010000000": 2,
        "9786012000000": 3,
        "9786017000000": 4,
        "9786018000000": 5,
        "9786018500000": 2,
        "9786020000000": 2,
        "9786020900000": 4,
        "9786021100000": 4,
        "9786021200000": 4,
        "9786021400000": 5,
        "9786021500000": 4,
        "9786021700000": 5,
        "9786021800000": 5,
        "9786021900000": 5,
        "9786022000000": 3,
        "9786027000000": 5,
        "9786027500000": 4,
        "9786028000000": 4,
        "9786029500000": 5,
        "9786030000000": 2,
        "9786030500000": 2,
        "9786035000000": 3,
        "9786038000000": 4,
        "9786039000000": 5,
        "9786040000000": 1,
        "9786045000000": 2,
        "9786049000000": 3,
        "9786049800000": 4,
        "9786050000000": 0,
        "9786050100000": 2,
        "9786050300000": 3,
        "9786050400000": 2,
        "9786051000000": 3,
        "9786054000000": 4,
        "9786056000000": 5,
        "9786059000000": 4,
        "9786060000000": 1,
        "9786061000000": 2,
        "9786065000000": 3,
        "9786068000000": 4,
        "9786069200000": 5,
        "9786070000000": 2,
        "9786074000000": 3,
        "9786077500000": 4,
        "9786079500000": 5,
        "9786080000000": 1,
        "9786081000000": 2,
        "9786082000000": 3,
        "9786084500000": 4,
        "9786086500000": 5,
        "9786087000000": 1,
        "9786090000000": 2,
        "9786094000000": 3,
        "9786098000000": 4,
        "9786099500000": 5,
        "9786110000000": 0,
        "9786120000000": 2,
        "9786123000000": 3,
        "9786124000000": 4,
        "9786124500000": 5,
        "9786125000000": 2,
        "9786130000000": 1,
        "9786140000000": 2,
        "9786144000000": 3,
        "9786148000000": 4,
        "9786149500000": 5,
        "9786150000000": 2,
        "9786151000000": 3,
        "9786155000000": 4,
        "9786158000000": 5,
        "9786159000000": 0,
        "9786160000000": 2,
        "9786162000000": 3,
        "9786167000000": 4,
        "9786169000000": 5,
        "9786170000000": 2,
        "9786175000000": 3,
        "9786177000000": 4,
        "9786179000000": 5,
        "9786180000000": 2,
        "9786182000000": 3,
        "9786185000000": 4,
        "9786188000000": 5,
        "9786190000000": 2,
        "9786191500000": 3,
        "9786197000000": 4,
        "9786199000000": 5,
        "9786200000000": 1,
        "9786210000000": 2,
        "9786213000000": 0,
        "9786214000000": 3,
        "9786216000000": 0,
        "9786218000000": 4,
        "9786219000000": 0,
        "9786219500000": 5,
        "9787000000000": 2,
        "9787100000000": 3,
        "9787500000000": 4,
        "9787800000000": 5,
        "9787900000000": 6,
        "9788000000000": 2,
        "9788020000000": 3,
        "9788070000000": 4,
        "9788085000000": 5,
        "9788090000000": 6,
        "9788100000000": 2,
        "9788120000000": 3,
        "9788170000000": 4,
        "9788185000000": 5,
        "9788190000000": 6,
        "9788200000000": 2,
        "9788220000000": 3,
        "9788269000000": 6,
        "9788270000000": 4,
        "9788290000000": 5,
        "9788299000000": 6,
        "9788300000000": 2,
        "9788320000000": 3,
        "9788360000000": 5,
        "9788370000000": 4,
        "9788385000000": 5,
        "9788390000000": 6,
        "9788400000000": 2,
        "9788414000000": 3,
        "9788415000000": 5,
        "9788420000000": 3,
        "9788470000000": 4,
        "9788485000000": 5,
        "9788490000000": 4,
        "9788492000000": 6,
        "9788492400000": 5,
        "9788493000000": 6,
        "9788495000000": 5,
        "9788497000000": 4,
        "9788500000000": 2,
        "9788520000000": 3,
        "9788555000000": 4,
        "9788560000000": 5,
        "9788570000000": 4,
        "9788585000000": 5,
        "9788590000000": 6,
        "9788598000000": 5,
        "9788600000000": 2,
        "9788630000000": 3,
        "9788660000000": 4,
        "9788680000000": 5,
        "9788690000000": 6,
        "9788700000000": 2,
        "9788730000000": 0,
        "9788740000000": 3,
        "9788765000000": 0,
        "9788770000000": 4,
        "9788780000000": 0,
        "9788785000000": 5,
        "9788795000000": 0,
        "9788797000000": 6,
        "9788800000000": 2,
        "9788820000000": 3,
        "9788860000000": 4,
        "9788885000000": 5,
        "9788890000000": 6,
        "9788891000000": 3,
        "9788893000000": 4,
        "9788894000000": 6,
        "9788895000000": 5,
        "9788900000000": 2,
        "9788925000000": 3,
        "9788955000000": 4,
        "9788985000000": 5,
        "9788995000000": 6,
        "9788997000000": 5,
        "9788999000000": 3,
        "9789000000000": 2,
        "9789020000000": 3,
        "9789050000000": 4,
        "9789070000000": 5,
        "9789080000000": 6,
        "9789085000000": 4,
        "9789090000000": 2,
        "9789091000000": 0,
        "9789094000000": 2,
        "9789095000000": 0,
        "9789100000000": 1,
        "9789120000000": 2,
        "9789150000000": 3,
        "9789165000000": 0,
        "9789170000000": 4,
        "9789180000000": 0,
        "9789185000000": 5,
        "9789195000000": 0,
        "9789197000000": 6,
        "9789200000000": 1,
        "9789260000000": 2,
        "9789280000000": 3,
        "9789290000000": 4,
        "9789295000000": 5,
        "9789299000000": 6,
        "9789300000000": 2,
        "9789310000000": 3,
        "9789350000000": 4,
        "9789380000000": 5,
        "9789395000000": 6,
        "9789400000000": 3,
        "9789460000000": 4,
        "9789490000000": 5,
        "9789500000000": 2,
        "9789505000000": 3,
        "9789509000000": 4,
        "9789509900000": 5,
        "9789510000000": 1,
        "9789512000000": 2,
        "9789515500000": 3,
        "9789518900000": 4,
        "9789519500000": 5,
        "9789520000000": 2,
        "9789522000000": 3,
        "9789525000000": 4,
        "9789526000000": 2,
        "9789526600000": 4,
        "9789526700000": 5,
        "9789527000000": 4,
        "9789528000000": 2,
        "9789529500000": 4,
        "9789529900000": 5,
        "9789530000000": 1,
        "9789531000000": 2,
        "9789531500000": 3,
        "9789535100000": 2,
        "9789535500000": 5,
        "9789536000000": 4,
        "9789539500000": 5,
        "9789540000000": 2,
        "9789542900000": 4,
        "9789543000000": 3,
        "9789548000000": 4,
        "9789549000000": 5,
        "9789549300000": 4,
        "9789550000000": 4,
        "9789552000000": 2,
        "9789554100000": 5,
        "9789554400000": 5,
        "9789554500000": 4,
        "9789555000000": 5,
        "9789555500000": 3,
        "9789557500000": 4,
        "9789558000000": 4,
        "9789559500000": 5,
        "9789560000000": 2,
        "9789562000000": 3,
        "9789567000000": 4,
        "9789570000000": 2,
        "9789570300000": 4,
        "9789570500000": 2,
        "9789572000000": 4,
        "9789572100000": 2,
        "9789572800000": 5,
        "9789573100000": 2,
        "9789574400000": 3,
        "9789578200000": 4,
        "9789579700000": 5,
        "9789580000000": 2,
        "9789585700000": 5,
        "9789586000000": 3,
        "9789588000000": 4,
        "9789589500000": 5,
        "9789590000000": 2,
        "9789592000000": 3,
        "9789597000000": 4,
        "9789598500000": 5,
        "9789600000000": 2,
        "9789602000000": 3,
        "9789606600000": 4,
        "9789606900000": 3,
        "9789607000000": 4,
        "9789608500000": 5,
        "9789609300000": 2,
        "9789609400000": 4,
        "9789609800000": 5,
        "9789610000000": 2,
        "9789612000000": 3,
        "9789616000000": 4,
        "9789619000000": 5,
        "9789619500000": 0,
        "9789620000000": 2,
        "9789622000000": 3,
        "9789627000000": 4,
        "9789628500000": 5,
        "9789628700000": 4,
        "9789629000000": 3,
        "9789630000000": 2,
        "9789632000000": 3,
        "9789637000000": 4,
        "9789638500000": 5,
        "9789639000000": 4,
        "9789640000000": 2,
        "9789641500000": 3,
        "9789642500000": 4,
        "9789643000000": 3,
        "9789645500000": 4,
        "9789649000000": 5,
        "9789649700000": 3,
        "9789649900000": 4,
        "9789650000000": 2,
        "9789652000000": 3,
        "9789656000000": 0,
        "9789657000000": 4,
        "9789658000000": 0,
        "9789659000000": 5,
        "9789660000000": 2,
        "9789661300000": 3,
        "9789661400000": 2,
        "9789661500000": 4,
        "9789661700000": 3,
        "9789662000000": 4,
        "9789662790000": 3,
        "9789662900000": 4,
        "9789663000000": 3,
        "9789667000000": 4,
        "9789669000000": 5,
        "9789669100000": 3,
        "9789669500000": 5,
        "9789669800000": 3,
        "9789670000000": 2,
        "9789670100000": 4,
        "9789671000000": 5,
        "9789672000000": 0,
        "9789673000000": 3,
        "9789675000000": 4,
        "9789676000000": 2,
        "9789679000000": 3,
        "9789679900000": 4,
        "9789679990000": 5,
        "9789680100000": 2,
        "9789684000000": 3,
        "9789685000000": 4,
        "9789688000000": 3,
        "9789689000000": 4,
        "9789690000000": 1,
        "9789692000000": 2,
        "9789692300000": 5,
        "9789692400000": 2,
        "9789694000000": 3,
        "9789697500000": 4,
        "9789700100000": 2,
        "9789706000000": 3,
        "9789709000000": 4,
        "9789709100000": 5,
        "9789709700000": 4,
        "9789710000000": 3,
        "9789710160000": 4,
        "9789710200000": 2,
        "9789710300000": 4,
        "9789710600000": 2,
        "9789715000000": 3,
        "9789718500000": 4,
        "9789719100000": 5,
        "9789719600000": 4,
        "9789719700000": 2,
        "9789719900000": 4,
        "9789720000000": 1,
        "9789722000000": 2,
        "9789725500000": 3,
        "9789728000000": 4,
        "9789729500000": 5,
        "9789730000000": 1,
        "9789731000000": 3,
        "9789731700000": 4,
        "9789732000000": 2,
        "9789735500000": 3,
        "9789737600000": 4,
        "9789738500000": 5,
        "9789738900000": 4,
        "9789739500000": 5,
        "9789740000000": 2,
        "9789742000000": 3,
        "9789747000000": 4,
        "9789748500000": 5,
        "9789749000000": 5,
        "9789749500000": 4,
        "9789750000000": 5,
        "9789750200000": 2,
        "9789752500000": 3,
        "9789756000000": 4,
        "9789759200000": 5,
        "9789759900000": 3,
        "9789760000000": 1,
        "9789764000000": 2,
        "9789766000000": 3,
        "9789768000000": 4,
        "9789769500000": 5,
        "9789770000000": 2,
        "9789772000000": 3,
        "9789775000000": 4,
        "9789777000000": 3,
        "9789778500000": 5,
        "9789779000000": 2,
        "9789780000000": 3,
        "9789782000000": 4,
        "9789783000000": 5,
        "9789788000000": 4,
        "9789789000000": 3,
        "9789790000000": 3,
        "9789791000000": 4,
        "9789791500000": 5,
        "9789792000000": 2,
        "9789793000000": 4,
        "9789794000000": 3,
        "9789798000000": 4,
        "9789799500000": 5,
        "9789800000000": 2,
        "9789802000000": 3,
        "9789806000000": 4,
        "9789810000000": 2,
        "9789811200000": 0,
        "9789811700000": 5,
        "9789812000000": 3,
        "9789812900000": 3,
        "9789813000000": 4,
        "9789813100000": 3,
        "9789814000000": 4,
        "9789820000000": 2,
        "9789821000000": 3,
        "9789827000000": 2,
        "9789829000000": 4,
        "9789829800000": 5,
        "9789830000000": 2,
        "9789830200000": 3,
        "9789832000000": 4,
        "9789834000000": 5,
        "9789834500000": 2,
        "9789835000000": 2,
        "9789838000000": 3,
        "9789839000000": 4,
        "9789839900000": 5,
        "9789840000000": 2,
        "9789844000000": 3,
        "9789848000000": 4,
        "9789849000000": 5,
        "9789850000000": 2,
        "9789854000000": 3,
        "9789856000000": 4,
        "9789859000000": 5,
        "9789860000000": 2,
        "9789861200000": 3,
        "9789865600000": 4,
        "9789868000000": 5,
        "9789870000000": 2,
        "9789871000000": 4,
        "9789872000000": 5,
        "9789873000000": 2,
        "9789873600000": 4,
        "9789874000000": 2,
        "9789874500000": 5,
        "9789875000000": 3,
        "9789879000000": 4,
        "9789879500000": 5,
        "9789880000000": 2,
        "9789881200000": 5,
        "9789881500000": 5,
        "9789881700000": 5,
        "9789882000000": 3,
        "9789888000000": 4,
        "9789889700000": 5,
        "9789890000000": 1,
        "9789892000000": 2,
        "9789895500000": 3,
        "9789898000000": 4,
        "9789899500000": 5,
        "9789926000000": 1,
        "9789926200000": 2,
        "9789926400000": 3,
        "9789926800000": 4,
        "9789927000000": 2,
        "9789927100000": 3,
        "9789927400000": 4,
        "9789927500000": 0,
        "9789928000000": 2,
        "9789928100000": 3,
        "9789928400000": 4,
        "9789928500000": 0,
        "9789929000000": 1,
        "9789929400000": 2,
        "9789929550000": 3,
        "9789929800000": 4,
        "9789930000000": 2,
        "9789930500000": 3,
        "9789930940000": 4,
        "9789931000000": 2,
        "9789931300000": 3,
        "9789931900000": 4,
        "9789932000000": 2,
        "9789932400000": 3,
        "9789932850000": 4,
        "9789933000000": 1,
        "9789933100000": 2,
        "9789933400000": 3,
        "9789933900000": 4,
        "9789934000000": 1,
        "9789934100000": 2,
        "9789934500000": 3,
        "9789934800000": 4,
        "9789935000000": 1,
        "9789935100000": 2,
        "9789935400000": 3,
        "9789935900000": 4,
        "9789936000000": 1,
        "9789936200000": 2,
        "9789936400000": 3,
        "9789936800000": 4,
        "9789937000000": 1,
        "9789937300000": 2,
        "9789937500000": 3,
        "9789937800000": 4,
        "9789938000000": 2,
        "9789938800000": 3,
        "9789938950000": 4,
        "9789939000000": 1,
        "9789939500000": 2,
        "9789939800000": 3,
        "9789939900000": 4,
        "9789940000000": 1,
        "9789940200000": 2,
        "9789940500000": 3,
        "9789940900000": 4,
        "9789941000000": 1,
        "9789941100000": 2,
        "9789941400000": 3,
        "9789941900000": 4,
        "9789942000000": 2,
        "9789942850000": 4,
        "9789942900000": 3,
        "9789942985000": 4,
        "9789943000000": 2,
        "9789943300000": 3,
        "9789943400000": 4,
        "9789943975000": 3,
        "9789944000000": 4,
        "9789944100000": 3,
        "9789944500000": 4,
        "9789944600000": 2,
        "9789944700000": 3,
        "9789944800000": 2,
        "9789944900000": 3,
        "9789945000000": 2,
        "9789945010000": 3,
        "9789945080000": 2,
        "9789945400000": 3,
        "9789945570000": 2,
        "9789945580000": 3,
        "9789945850000": 4,
        "9789946000000": 1,
        "9789946200000": 2,
        "9789946400000": 3,
        "9789946900000": 4,
        "9789947000000": 1,
        "9789947200000": 2,
        "9789947800000": 3,
        "9789948000000": 2,
        "9789948400000": 3,
        "9789948850000": 4,
        "9789949000000": 1,
        "9789949100000": 2,
        "9789949400000": 3,
        "9789949750000": 2,
        "9789949900000": 4,
        "9789950000000": 2,
        "9789950300000": 3,
        "9789950850000": 4,
        "9789951000000": 2,
        "9789951400000": 3,
        "9789951850000": 4,
        "9789952000000": 1,
        "9789952200000": 2,
        "9789952400000": 3,
        "9789952800000": 4,
        "9789953000000": 1,
        "9789953100000": 2,
        "9789953400000": 3,
        "9789953600000": 2,
        "9789953900000": 4,
        "9789954000000": 1,
        "9789954200000": 2,
        "9789954400000": 3,
        "9789954800000": 4,
        "9789955000000": 2,
        "9789955400000": 3,
        "9789955930000": 4,
        "9789956000000": 1,
        "9789956100000": 2,
        "9789956400000": 3,
        "9789956900000": 4,
        "9789957000000": 2,
        "9789957400000": 3,
        "9789957700000": 2,
        "9789957850000": 4,
        "9789957880000": 2,
        "9789958000000": 2,
        "9789958020000": 3,
        "9789958030000": 4,
        "9789958040000": 3,
        "9789958090000": 4,
        "9789958100000": 2,
        "9789958190000": 4,
        "9789958200000": 2,
        "9789958500000": 3,
        "9789958900000": 4,
        "9789959000000": 1,
        "9789959200000": 2,
        "9789959800000": 3,
        "9789959950000": 4,
        "9789959970000": 3,
        "9789959980000": 2,
        "9789960000000": 2,
        "9789960600000": 3,
        "9789960900000": 4,
        "9789961000000": 1,
        "9789961300000": 2,
        "9789961700000": 3,
        "9789961950000": 4,
        "9789962000000": 2,
        "9789962550000": 4,
        "9789962560000": 2,
        "9789962600000": 3,
        "9789962850000": 4,
        "9789963000000": 1,
        "9789963200000": 4,
        "9789963250000": 3,
        "9789963280000": 4,
        "9789963300000": 2,
        "9789963550000": 3,
        "9789963735000": 4,
        "9789963750000": 4,
        "9789964000000": 1,
        "9789964700000": 2,
        "9789964950000": 3,
        "9789965000000": 2,
        "9789965400000": 3,
        "9789965900000": 4,
        "9789966000000": 3,
        "9789966150000": 4,
        "9789966200000": 2,
        "9789966700000": 4,
        "9789966750000": 3,
        "9789966960000": 4,
        "9789967000000": 2,
        "9789967400000": 3,
        "9789967900000": 4,
        "9789968000000": 2,
        "9789968500000": 3,
        "9789968940000": 4,
        "9789970000000": 2,
        "9789970400000": 3,
        "9789970900000": 4,
        "9789971000000": 1,
        "9789971600000": 2,
        "9789971900000": 3,
        "9789971990000": 4,
        "9789972000000": 2,
        "9789972100000": 1,
        "9789972200000": 3,
        "9789972250000": 4,
        "9789972300000": 2,
        "9789972600000": 3,
        "9789972900000": 4,
        "9789973000000": 2,
        "9789973060000": 3,
        "9789973090000": 4,
        "9789973100000": 2,
        "9789973700000": 3,
        "9789973970000": 4,
        "9789974000000": 1,
        "9789974300000": 2,
        "9789974550000": 3,
        "9789974750000": 4,
        "9789974950000": 2,
        "9789975000000": 1,
        "9789975100000": 3,
        "9789975300000": 4,
        "9789975400000": 4,
        "9789975450000": 2,
        "9789975900000": 3,
        "9789975950000": 4,
        "9789976000000": 1,
        "9789976600000": 2,
        "9789976900000": 3,
        "9789976990000": 4,
        "9789977000000": 2,
        "9789977900000": 3,
        "9789977990000": 4,
        "9789978000000": 2,
        "9789978300000": 3,
        "9789978400000": 2,
        "9789978950000": 3,
        "9789978990000": 4,
        "9789979000000": 1,
        "9789979500000": 2,
        "9789979650000": 3,
        "9789979660000": 2,
        "9789979760000": 3,
        "9789979900000": 4,
        "9789980000000": 1,
        "9789980400000": 2,
        "9789980900000": 3,
        "9789980990000": 4,
        "9789981000000": 2,
        "9789981100000": 3,
        "9789981160000": 4,
        "9789981200000": 2,
        "9789981800000": 3,
        "9789981950000": 4,
        "9789982000000": 2,
        "9789982800000": 3,
        "9789982990000": 4,
        "9789983000000": 0,
        "9789983800000": 2,
        "9789983950000": 3,
        "9789983990000": 4,
        "9789984000000": 2,
        "9789984500000": 3,
        "9789984900000": 4,
        "9789985000000": 1,
        "9789985500000": 2,
        "9789985800000": 3,
        "9789985900000": 4,
        "9789986000000": 2,
        "9789986400000": 3,
        "9789986900000": 4,
        "9789986940000": 3,
        "9789986970000": 2,
        "9789987000000": 2,
        "9789987400000": 3,
        "9789987880000": 4,
        "9789988000000": 1,
        "9789988300000": 2,
        "9789988550000": 3,
        "9789988750000": 4,
        "9789989000000": 1,
        "9789989100000": 3,
        "9789989200000": 4,
        "9789989300000": 2,
        "9789989600000": 3,
        "9789989950000": 4,
        "9789990100000": 2,
        "9789990150000": 3,
        "9789990180000": 2,
        "9789990200000": 0,
        "9789990300000": 1,
        "9789990320000": 2,
        "9789990390000": 3,
        "9789990400000": 1,
        "9789990460000": 2,
        "9789990490000": 3,
        "9789990500000": 1,
        "9789990540000": 2,
        "9789990580000": 3,
        "9789990600000": 1,
        "9789990630000": 2,
        "9789990660000": 3,
        "9789990670000": 2,
        "9789990690000": 2,
        "9789990695000": 3,
        "9789990800000": 1,
        "9789990810000": 2,
        "9789990890000": 3,
        "9789990900000": 1,
        "9789990940000": 2,
        "9789990995000": 3,
        "9789991000000": 1,
        "9789991030000": 2,
        "9789991090000": 3,
        "9789991100000": 2,
        "9789991160000": 3,
        "9789991200000": 1,
        "9789991240000": 3,
        "9789991260000": 2,
        "9789991290000": 3,
        "9789991300000": 1,
        "9789991330000": 2,
        "9789991336000": 0,
        "9789991360000": 3,
        "9789991360500": 0,
        "9789991400000": 1,
        "9789991450000": 2,
        "9789991490000": 3,
        "9789991500000": 1,
        "9789991550000": 2,
        "9789991580000": 3,
        "9789991600000": 1,
        "9789991630000": 2,
        "9789991670000": 3,
        "9789991700000": 1,
        "9789991730000": 2,
        "9789991790000": 3,
        "9789991800000": 1,
        "9789991840000": 2,
        "9789991880000": 3,
        "9789991900000": 1,
        "9789991930000": 3,
        "9789991940000": 2,
        "9789991970000": 2,
        "9789991980000": 3,
        "9789991985000": 3,
        "9789991990000": 3,
        "9789992000000": 1,
        "9789992050000": 2,
        "9789992090000": 3,
        "9789992100000": 1,
        "9789992120000": 2,
        "9789992170000": 3,
        "9789992180000": 1,
        "9789992190000": 2,
        "9789992200000": 1,
        "9789992240000": 2,
        "9789992270000": 3,
        "9789992300000": 1,
        "9789992320000": 2,
        "9789992380000": 3,
        "9789992400000": 1,
        "9789992420000": 2,
        "9789992480000": 3,
        "9789992500000": 1,
        "9789992540000": 2,
        "9789992580000": 3,
        "9789992600000": 1,
        "9789992610000": 2,
        "9789992660000": 3,
        "9789992687000": 2,
        "9789992690000": 2,
        "9789992700000": 1,
        "9789992730000": 2,
        "9789992760000": 3,
        "9789992800000": 1,
        "9789992810000": 2,
        "9789992880000": 3,
        "9789992900000": 1,
        "9789992950000": 2,
        "9789992980000": 3,
        "9789993000000": 1,
        "9789993050000": 2,
        "9789993080000": 3,
        "9789993100000": 1,
        "9789993150000": 2,
        "9789993180000": 3,
        "9789993200000": 1,
        "9789993210000": 2,
        "9789993260000": 3,
        "9789993270000": 1,
        "9789993280000": 2,
        "9789993300000": 1,
        "9789993330000": 2,
        "9789993360000": 3,
        "9789993400000": 1,
        "9789993420000": 2,
        "9789993480000": 3,
        "9789993500000": 1,
        "9789993530000": 2,
        "9789993560000": 3,
        "9789993570000": 1,
        "9789993590000": 2,
        "9789993600000": 1,
        "9789993610000": 2,
        "9789993660000": 3,
        "9789993700000": 1,
        "9789993720000": 2,
        "9789993760000": 3,
        "9789993800000": 1,
        "9789993820000": 2,
        "9789993860000": 3,
        "9789993890000": 2,
        "9789993900000": 1,
        "9789993960000": 2,
        "9789993990000": 3,
        "9789994000000": 1,
        "9789994010000": 2,
        "9789994070000": 3,
        "9789994100000": 1,
        "9789994130000": 2,
        "9789994180000": 3,
        "9789994200000": 1,
        "9789994250000": 2,
        "9789994280000": 3,
        "9789994300000": 1,
        "9789994330000": 2,
        "9789994360000": 3,
        "9789994400000": 1,
        "9789994450000": 2,
        "9789994480000": 3,
        "9789994500000": 1,
        "9789994560000": 2,
        "9789994590000": 3,
        "9789994600000": 1,
        "9789994630000": 2,
        "9789994660000": 3,
        "9789994700000": 1,
        "9789994730000": 2,
        "9789994770000": 3,
        "9789994800000": 1,
        "9789994850000": 2,
        "9789994880000": 3,
        "9789994900000": 1,
        "9789994920000": 2,
        "9789994990000": 3,
        "9789995000000": 1,
        "9789995050000": 2,
        "9789995080000": 3,
        "9789995100000": 0,
        "9789995200000": 1,
        "9789995250000": 2,
        "9789995280000": 3,
        "9789995300000": 1,
        "9789995330000": 2,
        "9789995380000": 3,
        "9789995394000": 2,
        "9789995400000": 1,
        "9789995430000": 2,
        "9789995470000": 3,
        "9789995488000": 2,
        "9789995500000": 1,
        "9789995520000": 2,
        "9789995560000": 3,
        "9789995580000": 2,
        "9789995600000": 2,
        "9789995660000": 3,
        "9789995686000": 2,
        "9789995700000": 1,
        "9789995720000": 2,
        "9789995780000": 3,
        "9789995800000": 1,
        "9789995850000": 2,
        "9789995894000": 3,
        "9789995895000": 3,
        "9789995900000": 1,
        "9789995930000": 2,
        "9789995960000": 3,
        "9789996000000": 1,
        "9789996010000": 2,
        "9789996095000": 3,
        "9789996100000": 1,
        "9789996140000": 2,
        "9789996190000": 3,
        "9789996200000": 1,
        "9789996250000": 2,
        "9789996280000": 3,
        "9789996300000": 2,
        "9789996350000": 3,
        "9789996392000": 2,
        "9789996400000": 1,
        "9789996420000": 2,
        "9789996480000": 3,
        "9789996500000": 1,
        "9789996540000": 2,
        "9789996570000": 3,
        "9789996600000": 1,
        "9789996630000": 2,
        "9789996670000": 3,
        "9789996680000": 2,
        "9789996695000": 0,
        "9789996700000": 1,
        "9789996720000": 2,
        "9789996760000": 3,
        "9789996790000": 0,
        "9789996800000": 1,
        "9789996840000": 3,
        "9789996860000": 2,
        "9789996890000": 3,
        "9789996900000": 1,
        "9789996950000": 2,
        "9789996980000": 3,
        "9789997000000": 1,
        "9789997050000": 2,
        "9789997090000": 3,
        "9789997100000": 1,
        "9789997160000": 2,
        "9789997185000": 3,
        "9789997200000": 1,
        "9789997250000": 2,
        "9789997290000": 3,
        "9789997300000": 1,
        "9789997340000": 2,
        "9789997380000": 3,
        "9789997400000": 0,
        "9789997440000": 2,
        "9789997480000": 3,
        "9789997500000": 1,
        "9789997540000": 2,
        "9789997580000": 3,
        "9789997600000": 1,
        "9789997620000": 2,
        "9789997660000": 3,
        "9789997680000": 0,
        "9791000000000": 2,
        "9791020000000": 3,
        "9791070000000": 4,
        "9791090000000": 5,
        "9791097600000": 6,
        "9791100000000": 2,
        "9791125000000": 3,
        "9791155000000": 4,
        "9791185000000": 5,
        "9791195000000": 6,
        "9791200000000": 0,
        "9791220000000": 3,
        "9791220100000": 0,
    }

    def __init__(self, url = None): # url or filename
        pass

    @staticmethod
    def hyphensegments(isbn):
        grp = None
        reg = None

        for igrp in sorted(ISBNRange._range_grp.keys()):
            if isbn <= igrp:
                break
            grp = igrp
        for ireg in sorted(ISBNRange._range_reg.keys()):
            if isbn <= ireg:
                break
            reg = ireg
            
        # pre, grp, reg, pub, chk

        pre = 3
        if not grp or isbn > igrp: # None or 0
            raise ISBNRangeError(isbn)
        grp = ISBNRange._range_grp[grp]
        if not reg or isbn > ireg: # None or 0
            raise ISBNRangeError(isbn)
                
        reg = ISBNRange._range_reg[reg]        
        pub = 9 - grp - reg
        chk = 1
        
        return [3, grp, reg, pub, 1]

    @staticmethod
    def hyphenformat(isbn):    
        pos = []
        start = 0
        
        for i in ISBNRange.hyphensegments(isbn):
            pos.append(isbn[start:start + i])
            start = start + i
            
        return '-'.join(pos)
        
def _doctest ():
    import doctest
    doctest.testmod()

if __name__ == '__main__':
    _doctest()     
      

